<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>signing manager with flask and sqlite</title>
</head>
<body>
    {# So it doesn't show if user just created his account #}
    {% if session[login_state] != True %}
        <form action="sign.in.up" method="post">
            {# Phase 0 : only show email #}
            <input type="text" name="email" id="email" placeholder="email" {% if session.get("email") %} value="{{ session.get("email") }}" {% endif %} {% if not session.get("signing_state") %} autofocus {% endif %}>
            {% if feedback_messages["email_field"] %} {{ feedback_messages["email_field"]}} {% endif %}
            {% if session.get("signing_phase") == 0 %} <input type="submit" name="submit_button" id="submit_button" value="sign in/up"> {% endif %}

            {# email determines if it is a sign in or up #}
            {% if session.get("signing_state") == "sign_up" %}
                {% if session.get("signing_phase") > 0 %}
                    <input type="text" name="username" id="username" placeholder="username" {% if session.get("username") %} value="{{ session.get("username") }}" {% endif %} {% if session.get("signing_phase") == 1 %}autofocus{% endif %}>
                    {% if feedback_messages["username_field"]%} {{ feedback_messages["username_field"]}} {% endif %}
                    {% if session.get("signing_phase") == 1 %} <input type="submit" name="submit_button" id="submit_button" value="continue"> {% endif %}
                {% endif %}

                {% if session.get("signing_phase") > 1 %}
                    <input type="password" name="password" id="password" placeholder="password" {% if session.get("password") %} value="{{ session.get("password") }}" {% endif %} autofocus>
                    {% if feedback_messages["password_field"] %} {{ feedback_messages["password_field"]}} {% endif %}
                    <a href="/home"><input type="submit" name="submit_button" id="submit_button" value="sign up"></a>
                {% endif %}
            {% endif %}


            {% if session.get("signing_state") == "sign_in" %}
                <input type="password" name="password" id="password" placeholder="password" >
                {% if feedback_messages["password_field"] %} {{ feedback_messages["password_field"]}} {% endif %}
                <input type="submit" name="submit_button" id="submit_button" value="sign in">
            {% endif %}

        </form>
    {% endif %}
</body>
</html>